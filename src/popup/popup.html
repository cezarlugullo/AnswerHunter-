<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AnswerHunter</title>
  <link rel="stylesheet" href="popup.css">
</head>

<body>
  <!-- ===== ONBOARDING VIEW (New Design) ===== -->
  <div id="onboarding-view" class="onboarding-view hidden">

    <!-- Animated Background Elements -->
    <div class="onboarding-bg-shape shape-1"></div>
    <div class="onboarding-bg-shape shape-2"></div>

    <!-- ProgressBar -->
    <div class="onboarding-progress-container">
      <div class="onboarding-progress-bar" id="onboarding-progress-bar"></div>
    </div>

    <!-- SLIDES CONTAINER -->
    <div class="onboarding-slides" id="onboarding-slides">

      <!-- SLIDE 1: WELCOME -->
      <div class="onboarding-slide active" data-slide="1">
        <div class="slide-content centered">
          <div class="hero-icon-container">
            <span class="material-symbols-rounded hero-icon">rocket_launch</span>
            <div class="hero-ring"></div>
          </div>
          <h1 data-i18n="setup.new.welcome.title">Welcome to AnswerHunter</h1>
          <p data-i18n="setup.new.welcome.desc">Your AI-powered study companion. Let's get you ready in less than 2
            minutes.</p>

          <button id="welcomeStartBtn" class="btn-primary-large">
            <span data-i18n="setup.new.start">Get Started</span>
            <span class="material-symbols-rounded">arrow_forward</span>
          </button>
        </div>
      </div>

      <!-- SLIDE 2: GROQ -->
      <div class="onboarding-slide" data-slide="2">
        <div class="slide-header">
          <div class="step-badge">1/3</div>
          <h2 data-i18n="setup.groq.title">Connect the Brain</h2>
        </div>
        <p class="slide-desc" data-i18n="setup.groq.tagline">Groq powers the AI analysis. It's free and incredibly fast.
        </p>

        <div class="input-card">
          <label class="input-label" for="input-groq">
            <span class="material-symbols-rounded">vpn_key</span>
            <span>API Key</span>
          </label>
          <div class="input-group">
            <input type="password" id="input-groq" class="modern-input" placeholder="gsk_..." autocomplete="off">
            <button class="visibility-toggle" data-target="input-groq">
              <span class="material-symbols-rounded">visibility</span>
            </button>
          </div>
          <div class="input-hint" id="hint-groq">
            <span class="material-symbols-rounded">info</span>
            <span data-i18n="setup.hint.groq">Starts with "gsk_"</span>
          </div>
        </div>

        <div class="action-row">
          <a href="https://console.groq.com/keys" target="_blank" class="link-btn">
            <span class="material-symbols-rounded">open_in_new</span>
            <span data-i18n="setup.getKey">Get Free Key</span>
          </a>
          <button id="test-groq" class="btn-test-modern" data-provider="groq">
            <span data-i18n="setup.test">Test Key</span>
          </button>
        </div>

        <div class="slide-footer">
          <button class="nav-btn-prev" id="prev-groq"><span class="material-symbols-rounded">arrow_back</span></button>
          <div class="step-status" id="status-groq"></div>
          <button class="nav-btn-next" id="btn-next-groq" disabled>
            <span data-i18n="setup.next">Next</span>
            <span class="material-symbols-rounded">arrow_forward</span>
          </button>
        </div>
      </div>

      <!-- SLIDE 3: SERPER -->
      <div class="onboarding-slide" data-slide="3">
        <div class="slide-header">
          <div class="step-badge">2/3</div>
          <h2 data-i18n="setup.serper.title">Enable Vision</h2>
        </div>
        <p class="slide-desc" data-i18n="setup.serper.tagline">Serper allows the AI to search the web for evidence.</p>

        <div class="input-card">
          <label class="input-label" for="input-serper">
            <span class="material-symbols-rounded">travel_explore</span>
            <span>API Key</span>
          </label>
          <div class="input-group">
            <input type="password" id="input-serper" class="modern-input" placeholder="Your Serper Key..."
              autocomplete="off">
            <button class="visibility-toggle" data-target="input-serper">
              <span class="material-symbols-rounded">visibility</span>
            </button>
          </div>
          <div class="input-hint" id="hint-serper">
            <span class="material-symbols-rounded">info</span>
            <span data-i18n="setup.hint.serper">From serper.dev dashboard</span>
          </div>
        </div>

        <div class="action-row">
          <a href="https://serper.dev/api-key" target="_blank" class="link-btn">
            <span class="material-symbols-rounded">open_in_new</span>
            <span data-i18n="setup.getKey">Get Free Key</span>
          </a>
          <button id="test-serper" class="btn-test-modern" data-provider="serper">
            <span data-i18n="setup.test">Test Key</span>
          </button>
        </div>

        <div class="slide-footer">
          <button class="nav-btn-prev" id="prev-serper"><span
              class="material-symbols-rounded">arrow_back</span></button>
          <div class="step-status" id="status-serper"></div>
          <button class="nav-btn-next" id="btn-next-serper" disabled>
            <span data-i18n="setup.next">Next</span>
            <span class="material-symbols-rounded">arrow_forward</span>
          </button>
        </div>
      </div>

      <!-- SLIDE 4: GEMINI (Optional) -->
      <div class="onboarding-slide" data-slide="4">
        <div class="slide-header">
          <div class="step-badge">3/3</div>
          <h2 data-i18n="setup.gemini.title">Add Backup Power</h2>
          <span class="badge-optional" data-i18n="setup.optional">Optional</span>
        </div>
        <p class="slide-desc" data-i18n="setup.gemini.tagline">Gemini acts as a fallback if Groq is busy.</p>

        <div class="input-card">
          <label class="input-label" for="input-gemini">
            <span class="material-symbols-rounded">auto_awesome</span>
            <span>API Key</span>
          </label>
          <div class="input-group">
            <input type="password" id="input-gemini" class="modern-input" placeholder="AIza..." autocomplete="off">
            <button class="visibility-toggle" data-target="input-gemini">
              <span class="material-symbols-rounded">visibility</span>
            </button>
          </div>
          <div class="input-hint" id="hint-gemini">
            <span class="material-symbols-rounded">info</span>
            <span data-i18n="setup.hint.gemini">Starts with "AIza"</span>
          </div>
        </div>

        <div class="action-row">
          <a href="https://aistudio.google.com/app/apikey" target="_blank" class="link-btn">
            <span class="material-symbols-rounded">open_in_new</span>
            <span data-i18n="setup.getKey">Get Free Key</span>
          </a>
          <button id="test-gemini" class="btn-test-modern" data-provider="gemini">
            <span data-i18n="setup.test">Test Key</span>
          </button>
        </div>

        <div class="slide-footer">
          <button class="nav-btn-prev" id="prev-gemini"><span
              class="material-symbols-rounded">arrow_back</span></button>
          <div class="step-status" id="status-gemini"></div>
          <button class="btn-finish" id="saveSetupBtn">
            <span data-i18n="setup.finish">Finish Setup</span>
            <span class="material-symbols-rounded">check</span>
          </button>
        </div>
        <button id="setupSkipBtn" class="btn-text-skip" data-i18n="setup.skip">Skip for now</button>
      </div>

    </div>
  </div>

  <!-- ===== TOAST CONTAINER ===== -->
  <div id="toast-container" class="toast-container" aria-live="polite"></div>

  <!-- ===== MAIN CONTAINER (Hidden during onboarding) ===== -->
  <div class="container" id="main-app-container">
    <header>
      <div class="header-top">
        <div class="header-brand">
          <span class="material-symbols-rounded header-logo">track_changes</span>
          <div>
            <h1 data-i18n="app.title">AnswerHunter</h1>
            <p class="subtitle" data-i18n="app.subtitle">Educational answer hunter</p>
          </div>
        </div>
        <div class="header-actions">
          <div class="lang-toggle" id="languageToggle">
            <button type="button" class="lang-btn active" data-lang="en">
              <svg viewBox="0 0 640 480" class="lang-flag">
                <path fill="#bd3d44"
                  d="M0 0h640v37h-640zm0 73.9h640v37h-640zm0 73.8h640v37h-640zm0 73.8h640v37h-640zm0 73.9h640v37h-640zm0 73.8h640v37h-640zm0 73.8h640v36.9h-640z" />
                <path fill="#fff"
                  d="M0 37h640v36.9h-640zm0 73.8h640v36.9h-640zm0 73.9h640v36.8h-640zm0 73.8h640v37h-640zm0 73.9h640v36.8h-640zm0 73.8h640v36.9h-640z" />
                <path fill="#192f5d" d="M0 0h256v258.5h-256z" />
                <g fill="#fff">
                  <g id="s18">
                    <g id="s9">
                      <g id="s5">
                        <g id="s4">
                          <path id="s"
                            d="M26.2 17l3.5 10.8h11.4l-9.2 6.7 3.5 10.8-9.2-6.7-9.2 6.7 3.5-10.8-9.2-6.7h11.4z" />
                          <use href="#s" x="52.4" />
                        </g>
                        <use href="#s4" x="104.8" />
                      </g>
                      <use href="#s4" x="157.2" />
                    </g>
                    <use href="#s5" y="39.4" />
                  </g>
                  <use href="#s9" y="78.8" />
                </g>
                <use href="#s18" x="26.2" y="19.7" />
                </g>
              </svg>
              EN
            </button>
            <button type="button" class="lang-btn" data-lang="pt-BR">
              <svg viewBox="0 0 640 480" class="lang-flag">
                <path fill="#229e45" d="M0 0h640v480H0z" />
                <path fill="#f8e509" d="M321.4 36.2 609.7 240 321.4 443.8 33.1 240z" />
                <circle fill="#2b49a3" cx="321.4" cy="240" r="113.4" />
                <path fill="#fff" d="M195.8 231.5c37.6-58.1 109.8-82.2 169-59a116 116 0 0 0-169 59z" />
              </svg>
              PT
            </button>
          </div>
          <button id="settingsBtn" class="settings-btn" data-i18n-title="app.settings">
            <span class="material-symbols-rounded">settings</span>
          </button>
        </div>
      </div>
    </header>

    <!-- ===== TABS & CONTENT (hidden until setup done) ===== -->
    <div class="tabs">
      <button class="tab-btn active" data-tab="search">
        <span class="material-symbols-rounded">search</span>
        <span data-i18n="tab.search">Search</span>
      </button>
      <button class="tab-btn" data-tab="binder">
        <span class="material-symbols-rounded">folder</span>
        <span data-i18n="tab.binder">Binder</span>
      </button>
    </div>

    <div id="view-search" class="view-section active">
      <div class="controls">
        <div class="btn-group">
          <button id="searchBtn" class="btn-search">
            <span class="material-symbols-rounded">travel_explore</span>
            <span data-i18n="action.search">Search</span>
          </button>
          <button id="extractBtn" class="btn-primary">
            <span class="material-symbols-rounded">description</span>
            <span data-i18n="action.extract">Extract</span>
          </button>
        </div>
        <button id="copyBtn" class="btn-secondary" disabled>
          <span class="material-symbols-rounded">content_copy</span>
          <span data-i18n="action.copyAll">Copy all</span>
        </button>
      </div>
      <div id="status" class="status"></div>
      <div id="results" class="results">
        <div class="placeholder">
          <span class="material-symbols-rounded">library_books</span>
          <p data-i18n="placeholder.search">Find answers and save them to your binder.</p>
        </div>
      </div>
    </div>

    <div id="view-binder" class="view-section">
      <div class="binder-header">
        <div class="binder-header-left">
          <span class="material-symbols-rounded binder-header-icon">menu_book</span>
          <div>
            <h2 data-i18n="binder.title">My Study</h2>
            <p class="binder-subtitle" data-i18n="binder.subtitle">Saved questions for review</p>
          </div>
        </div>
        <button id="clearBinderBtn" class="action-btn" data-i18n-title="binder.clearAll">
          <span class="material-symbols-rounded">delete_sweep</span>
        </button>
      </div>
      <div id="binder-list" class="results">
        <div class="placeholder">
          <span class="material-symbols-rounded">folder_open</span>
          <p data-i18n-html="binder.placeholderHtml">Your binder is empty.<br>Save questions to review later.</p>
        </div>
      </div>
    </div>

    <footer>
      <p>
        <span class="material-symbols-rounded" style="font-size:16px;">smart_toy</span>
        <span data-i18n="footer.refined">AI-refined answers with source weighting</span>
      </p>
    </footer>
  </div>

  <script type="module" src="popup.js"></script>
</body>

</html>