<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AnswerHunter</title>
  <link rel="stylesheet" href="popup.css">
</head>

<body>
  <!-- Interactive Glow Background (follows mouse) -->
  <div id="ah-glow-bg" class="ah-glow-bg"></div>

  <!-- ===== ONBOARDING CONTAINER ===== -->
  <div id="onboarding-view" class="onboarding-overlay hidden">
    <!-- Progressive Glow Background -->
    <div id="ob-progress-glow" class="ob-progress-glow"></div>

    <div class="onboarding-card">
      <div class="ob-header">
        <div class="ob-brand">
          <span class="material-symbols-rounded ob-logo-icon">track_changes</span>
          <span class="ob-logo-text" data-i18n="app.title">AnswerHunter</span>
        </div>

        <div class="ob-controls">
          <div class="ob-lang-toggle" id="obLanguageToggle">
            <button class="ob-lang-btn active" data-lang="en">EN</button>
            <button class="ob-lang-btn" data-lang="pt-BR">PT</button>
          </div>
          <button id="setupSkipBtn" class="ob-skip-btn" data-i18n="setup.skip">Skip</button>
        </div>
      </div>

      <!-- Stepper / dots -->
      <div class="ob-stepper">
        <div class="ob-progress-track">
          <div id="onboarding-progress-bar" class="ob-progress-bar"></div>
        </div>
        <div id="ob-step-dots" class="ob-step-dots">
          <div class="ob-dot active"></div>
          <div class="ob-dot"></div>
          <div class="ob-dot"></div>
          <div class="ob-dot"></div>
          <div class="ob-dot"></div>
          <div class="ob-dot"></div>
        </div>
      </div>

      <div class="ob-slides-wrapper">
        <div id="onboarding-slides" class="ob-slides">

          <!-- Slide 0: Welcome -->
          <div class="ob-slide welcome-slide" data-slide="0">
            <div class="ob-slide-content center-content" style="padding-top: 20px;">

              <!-- Animated Illustration -->
              <div class="ob-hero-illustration">
                <div class="ob-orbit-ring ob-orbit-1"></div>
                <div class="ob-orbit-ring ob-orbit-2"></div>
                <div class="ob-hero-icon-wrap">
                  <span class="material-symbols-rounded ob-hero-icon">rocket_launch</span>
                </div>
                <div class="ob-orbit-dot ob-od-1"><span class="material-symbols-rounded">search</span></div>
                <div class="ob-orbit-dot ob-od-2"><span class="material-symbols-rounded">psychology</span></div>
                <div class="ob-orbit-dot ob-od-3"><span class="material-symbols-rounded">auto_awesome</span></div>
              </div>

              <h2 class="ob-title glass-text" data-i18n="setup.new.welcome.title">Welcome to AnswerHunter</h2>
              <p class="ob-desc" data-i18n="setup.new.welcome.desc" style="margin-bottom: 10px;">We will guide you step
                by step. You only need to copy and paste your keys.</p>

              <!-- Feature Pills -->
              <div class="ob-feature-pills">
                <div class="ob-pill">
                  <span class="material-symbols-rounded">bolt</span>
                  <span data-i18n="setup.feature.fast">Lightning Fast</span>
                </div>
                <div class="ob-pill">
                  <span class="material-symbols-rounded">lock</span>
                  <span data-i18n="setup.feature.private">100% Private</span>
                </div>
                <div class="ob-pill">
                  <span class="material-symbols-rounded">money_off</span>
                  <span data-i18n="setup.feature.free">Free APIs</span>
                </div>
              </div>

              <button id="welcomeStartBtn" class="ob-btn ob-btn-primary splash-btn">
                <span data-i18n="setup.new.start">Start guided setup</span>
                <span class="material-symbols-rounded">arrow_forward</span>
              </button>
            </div>
          </div>

          <!-- Slide 1: Groq -->
          <div class="ob-slide provider-slide" data-slide="1">
            <div class="ob-slide-layout">
              <!-- Left side (Tutorial) -->
              <div class="ob-tutorial-card">
                <div class="ob-tutorial-header">
                  <span class="material-symbols-rounded">school</span>
                  <h3 data-i18n="setup.groq.title">Set up your Groq key</h3>
                </div>
                <div class="ob-tutorial-body">
                  <ol class="ob-steps">
                    <li><a href="https://console.groq.com/keys" target="_blank" rel="noopener noreferrer"
                        data-i18n="setup.openSiteAction">1. Open
                        official site</a></li>
                    <li data-i18n="setup.groq.step2">On Groq, open "API Keys" and create a new key.</li>
                    <li data-i18n="setup.groq.step3">Copy the key, paste below, then click "Validate key".</li>
                  </ol>
                  <p class="ob-hint" data-i18n="setup.groq.tagline">Groq is required. It helps the extension understand
                    and analyze each question.</p>
                </div>
              </div>

              <!-- Right side (Form) -->
              <div class="ob-form-card groq-theme">
                <div class="ob-provider-badge">
                  <span class="material-symbols-rounded badge-icon">bolt</span>
                  <span>GROQ ENGINE</span>
                </div>

                <div class="ob-key-status-chip hidden" id="key-status-groq">
                  <span class="material-symbols-rounded ob-key-status-icon">check_circle</span>
                  <span class="ob-key-status-text" data-i18n="setup.keyStatus.configured">Configured</span>
                </div>

                <div class="ob-input-group">
                  <label for="input-groq" data-i18n="setup.keyLabel">API key</label>
                  <div class="ob-input-wrapper">
                    <span class="material-symbols-rounded ob-input-icon">key</span>
                    <input type="password" id="input-groq" class="ob-input" placeholder="gsk_..." spellcheck="false"
                      autocomplete="off">
                    <button type="button" class="visibility-toggle" data-target="input-groq" title="Toggle visibility">
                      <span class="material-symbols-rounded">visibility</span>
                    </button>
                  </div>
                  <div id="status-groq" class="ob-test-status"></div>
                </div>

                <div class="ob-privacy-note">
                  <span class="material-symbols-rounded">shield_lock</span>
                  <span data-i18n="setup.privacy">Your keys are stored locally and never sent to our servers.</span>
                </div>

                <div class="ob-actions">
                  <button id="prev-groq" class="ob-btn ob-btn-ghost"><span
                      class="material-symbols-rounded">arrow_back</span></button>
                  <button id="change-key-groq" class="ob-btn ob-btn-secondary hidden" data-i18n="setup.changeKey">Change
                    Key</button>
                  <button id="test-groq" class="ob-btn ob-btn-secondary test-btn">
                    <span class="material-symbols-rounded">wifi_tethering</span> <span class="test-btn-text"
                      data-i18n="setup.validateAction">Validate key</span>
                  </button>
                  <button id="btn-next-groq" class="ob-btn ob-btn-primary" disabled>
                    <span data-i18n="setup.next">Next</span> <span class="material-symbols-rounded">arrow_forward</span>
                  </button>
                  <button id="close-settings-groq" class="ob-btn ob-btn-primary hidden"
                    data-i18n="setup.closeSettings">Done</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Slide 2: Serper -->
          <div class="ob-slide provider-slide" data-slide="2">
            <div class="ob-slide-layout">
              <div class="ob-tutorial-card">
                <div class="ob-tutorial-header">
                  <span class="material-symbols-rounded">travel_explore</span>
                  <h3 data-i18n="setup.serper.title">Set up your Serper key</h3>
                </div>
                <div class="ob-tutorial-body">
                  <ol class="ob-steps">
                    <li><a href="https://serper.dev/" target="_blank" rel="noopener noreferrer"
                        data-i18n="setup.openSiteAction">1. Open official
                        site</a></li>
                    <li data-i18n="setup.serper.step2">Open your dashboard and locate your API Key.</li>
                    <li data-i18n="setup.serper.step3">Copy the key, paste below, then click "Validate key".</li>
                  </ol>
                  <p class="ob-hint" data-i18n="setup.serper.tagline">Serper is optional. It improves web evidence
                    coverage and ranking quality.</p>
                </div>
              </div>

              <div class="ob-form-card serper-theme">
                <div class="ob-provider-badge">
                  <span class="material-symbols-rounded badge-icon">search</span>
                  <span>SERPER ENGINE</span>
                </div>

                <div class="ob-key-status-chip hidden" id="key-status-serper">
                  <span class="material-symbols-rounded ob-key-status-icon">check_circle</span>
                  <span class="ob-key-status-text" data-i18n="setup.keyStatus.configured">Configured</span>
                </div>


                <div class="ob-input-group">
                  <label for="input-serper" data-i18n="setup.keyLabel">API key</label>
                  <div class="ob-input-wrapper">
                    <span class="material-symbols-rounded ob-input-icon">key</span>
                    <input type="password" id="input-serper" class="ob-input" placeholder="..." spellcheck="false"
                      autocomplete="off">
                    <button type="button" class="visibility-toggle" data-target="input-serper"
                      title="Toggle visibility">
                      <span class="material-symbols-rounded">visibility</span>
                    </button>
                  </div>
                  <div id="status-serper" class="ob-test-status"></div>
                </div>

                <div class="ob-privacy-note">
                  <span class="material-symbols-rounded">shield_lock</span>
                  <span data-i18n="setup.privacy">Your keys are stored locally and never sent to our servers.</span>
                </div>

                <div class="ob-actions">
                  <button id="prev-serper" class="ob-btn ob-btn-ghost"><span
                      class="material-symbols-rounded">arrow_back</span></button>
                  <button id="change-key-serper" class="ob-btn ob-btn-secondary hidden"
                    data-i18n="setup.changeKey">Change Key</button>
                  <button id="remove-key-serper" class="ob-btn ob-btn-secondary hidden"
                    data-i18n="setup.removeSerperKey">Remove Serper key</button>
                  <button id="test-serper" class="ob-btn ob-btn-secondary test-btn">
                    <span class="material-symbols-rounded">wifi_tethering</span> <span class="test-btn-text"
                      data-i18n="setup.validateAction">Validate key</span>
                  </button>
                  <button id="btn-next-serper" class="ob-btn ob-btn-primary" disabled>
                    <span data-i18n="setup.next">Next</span> <span class="material-symbols-rounded">arrow_forward</span>
                  </button>
                  <button id="close-settings-serper" class="ob-btn ob-btn-primary hidden"
                    data-i18n="setup.closeSettings">Done</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Slide 3: Gemini & Save -->
          <div class="ob-slide provider-slide" data-slide="3">
            <div class="ob-slide-layout">
              <div class="ob-tutorial-card">
                <div class="ob-tutorial-header">
                  <span class="material-symbols-rounded">auto_awesome</span>
                  <h3 data-i18n="setup.gemini.title">Optional: set up Gemini backup</h3>
                </div>
                <div class="ob-tutorial-body">
                  <ol class="ob-steps">
                    <li><a href="https://aistudio.google.com/app/apikey" target="_blank" rel="noopener noreferrer"
                        data-i18n="setup.openSiteAction">1. Open official site</a></li>
                    <li data-i18n="setup.gemini.step2">Click "Get API key" then "Create API key".</li>
                    <li data-i18n="setup.gemini.step3">Copy the key, paste below, and validate it if you want backup AI.
                    </li>
                  </ol>
                  <p class="ob-hint" data-i18n="setup.gemini.tagline">Optional step. Gemini is only used if Groq is
                    unavailable.</p>
                </div>
              </div>

              <div class="ob-form-card gemini-theme">
                <div class="ob-provider-badge">
                  <span class="material-symbols-rounded badge-icon">neurology</span>
                  <span>GEMINI ENGINE</span>
                </div>

                <div class="ob-key-status-chip hidden" id="key-status-gemini">
                  <span class="material-symbols-rounded ob-key-status-icon">check_circle</span>
                  <span class="ob-key-status-text" data-i18n="setup.keyStatus.configured">Configured</span>
                </div>


                <div class="ob-input-group">
                  <label for="input-gemini" data-i18n="setup.keyLabel">API key</label>
                  <div class="ob-input-wrapper">
                    <span class="material-symbols-rounded ob-input-icon">key</span>
                    <input type="password" id="input-gemini" class="ob-input" placeholder="AIza..." spellcheck="false"
                      autocomplete="off">
                    <button type="button" class="visibility-toggle" data-target="input-gemini"
                      title="Toggle visibility">
                      <span class="material-symbols-rounded">visibility</span>
                    </button>
                  </div>
                  <div id="status-gemini" class="ob-test-status"></div>
                </div>

                <div class="ob-privacy-note">
                  <span class="material-symbols-rounded">shield_lock</span>
                  <span data-i18n="setup.privacy">Your keys are stored locally and never sent to our servers.</span>
                </div>

                <div class="ob-actions">
                  <button id="prev-gemini" class="ob-btn ob-btn-ghost"><span
                      class="material-symbols-rounded">arrow_back</span></button>
                  <button id="change-key-gemini" class="ob-btn ob-btn-secondary hidden"
                    data-i18n="setup.changeKey">Change Key</button>
                  <button id="remove-key-gemini" class="ob-btn ob-btn-secondary hidden"
                    data-i18n="setup.removeGeminiKey">Remove Gemini key</button>
                  <button id="test-gemini" class="ob-btn ob-btn-secondary test-btn">
                    <span class="material-symbols-rounded">wifi_tethering</span> <span class="test-btn-text"
                      data-i18n="setup.validateAction">Validate key</span>
                  </button>
                  <button id="btn-next-gemini" class="ob-btn ob-btn-primary">
                    <span data-i18n="setup.next">Next</span> <span class="material-symbols-rounded">arrow_forward</span>
                  </button>
                  <button id="close-settings-gemini" class="ob-btn ob-btn-primary hidden"
                    data-i18n="setup.closeSettings">Done</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Slide 4: OpenRouter -->
          <div class="ob-slide provider-slide" data-slide="4">
            <div class="ob-slide-layout">
              <div class="ob-tutorial-card">
                <div class="ob-tutorial-header">
                  <span class="material-symbols-rounded">language</span>
                  <h3 data-i18n="setup.openrouter.title">Optional: set up OpenRouter backup</h3>
                </div>
                <div class="ob-tutorial-body">
                  <ol class="ob-steps">
                    <li><a href="https://openrouter.ai/keys" target="_blank" rel="noopener noreferrer"
                        data-i18n="setup.openSiteAction">1. Open official site</a></li>
                    <li data-i18n="setup.openrouter.step2">Click "Create Key".</li>
                    <li data-i18n="setup.openrouter.step3">Copy the key, paste below, and validate it.</li>
                  </ol>
                  <p class="ob-hint" data-i18n="setup.openrouter.tagline">Access hundreds of open-source models, many
                    for free.</p>
                </div>
              </div>

              <div class="ob-form-card" style="border-top: 2px solid rgba(80,150,255,0.5);">
                <div class="ob-provider-badge" style="color: #64b5f6;">
                  <span class="material-symbols-rounded badge-icon">public</span>
                  <span>OPENROUTER ENGINE</span>
                </div>

                <div class="ob-key-status-chip hidden" id="key-status-openrouter">
                  <span class="material-symbols-rounded ob-key-status-icon">check_circle</span>
                  <span class="ob-key-status-text" data-i18n="setup.keyStatus.configured">Configured</span>
                </div>

                <div class="ob-input-group">
                  <label for="input-openrouter" data-i18n="setup.keyLabel">API key</label>
                  <div class="ob-input-wrapper">
                    <span class="material-symbols-rounded ob-input-icon">key</span>
                    <input type="password" id="input-openrouter" class="ob-input" placeholder="sk-or-v1-..."
                      spellcheck="false" autocomplete="off">
                    <button type="button" class="visibility-toggle" data-target="input-openrouter"
                      title="Toggle visibility">
                      <span class="material-symbols-rounded">visibility</span>
                    </button>
                  </div>
                  <div id="status-openrouter" class="ob-test-status"></div>
                </div>

                <!-- OpenRouter Model Selection -->
                <div class="ob-input-group" style="margin-top: 15px;">
                  <label for="select-openrouter-model" data-i18n="setup.openrouter.modelLabel"
                    style="font-size: 0.8rem; color: rgba(255,255,255,0.9); margin-bottom: 5px; display: block;">Select
                    Model</label>
                  <select id="select-openrouter-model" class="ob-input"
                    style="width: 100%; border: 1px solid rgba(255,255,255,0.2); background: rgba(0,0,0,0.2); color: white; border-radius: 8px; padding: 10px;">
                    <option value="deepseek/deepseek-r1:free">DeepSeek R1 (Free)</option>
                    <option value="google/gemini-2.5-flash-free">Gemini 2.5 Flash (Free)</option>
                    <option value="qwen/qwen-2.5-coder-32b-instruct:free">Qwen 2.5 Coder 32b (Free)</option>
                    <option value="google/gemini-exp-1121:free">Gemini Pro Exp (Free)</option>
                    <option value="zhipuai/glm-4-plus">GLM-4 Plus</option>
                  </select>
                </div>

                <div class="ob-privacy-note">
                  <span class="material-symbols-rounded">shield_lock</span>
                  <span data-i18n="setup.privacy">Your keys are stored locally and never sent to our servers.</span>
                </div>

                <div class="ob-actions">
                  <button id="prev-openrouter" class="ob-btn ob-btn-ghost"><span
                      class="material-symbols-rounded">arrow_back</span></button>
                  <button id="change-key-openrouter" class="ob-btn ob-btn-secondary hidden"
                    data-i18n="setup.changeKey">Change Key</button>
                  <button id="remove-key-openrouter" class="ob-btn ob-btn-secondary hidden"
                    data-i18n="setup.removeOpenrouterKey">Remove key</button>
                  <button id="test-openrouter" class="ob-btn ob-btn-secondary test-btn">
                    <span class="material-symbols-rounded">wifi_tethering</span> <span class="test-btn-text"
                      data-i18n="setup.validateAction">Validate key</span>
                  </button>
                  <button id="btn-next-openrouter" class="ob-btn ob-btn-primary">
                    <span data-i18n="setup.next">Next</span> <span class="material-symbols-rounded">arrow_forward</span>
                  </button>
                  <button id="close-settings-openrouter" class="ob-btn ob-btn-primary hidden"
                    data-i18n="setup.closeSettings">Done</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Slide 6: Preferences & Finish -->
          <div class="ob-slide provider-slide" data-slide="5">
            <div class="ob-slide-layout">
              <div class="ob-form-card" style="border-top: 2px solid rgba(255,107,0,0.5); gap: 18px;">

                <div style="text-align: center; padding: 4px 0 2px;">
                  <span class="material-symbols-rounded" style="font-size: 36px; color: #ff9a40;">auto_awesome</span>
                  <h3 data-i18n="setup.prefs.title" style="margin: 8px 0 4px; font-size: 1.1rem; color: #ffffff;">Tudo
                    pronto!</h3>
                  <p data-i18n="setup.prefs.subtitle"
                    style="font-size: 0.82rem; color: rgba(255,255,255,0.85); margin: 0;">Uma última escolha antes de
                    começar.</p>
                </div>

                <div
                  style="background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px; padding: 14px 16px;">
                  <p data-i18n="setup.prefs.aiLabel"
                    style="font-size: 0.8rem; color: rgba(255,255,255,0.9); margin: 0 0 10px; text-transform: uppercase; letter-spacing: 0.05em; font-weight: 600;">
                    Como a IA deve responder?</p>
                  <div style="display: flex; gap: 8px; flex-wrap: wrap; justify-content: space-between;">

                    <button class="ob-btn ob-provider-pill active" id="pill-groq-ob" data-provider="groq"
                      style="flex: 1; min-width: 90px; flex-direction: column; align-items: center; gap: 4px; padding: 12px 4px;">
                      <span class="material-symbols-rounded" style="font-size: 20px;">bolt</span>
                      <span data-i18n="setup.prefs.groqLabel" style="font-size: 0.82rem; font-weight: 600;">Groq</span>
                    </button>
                    <button class="ob-btn ob-provider-pill" id="pill-gemini-ob" data-provider="gemini"
                      style="flex: 1; min-width: 90px; flex-direction: column; align-items: center; gap: 4px; padding: 12px 4px;">
                      <span class="material-symbols-rounded" style="font-size: 20px;">psychology</span>
                      <span data-i18n="setup.prefs.geminiLabel"
                        style="font-size: 0.82rem; font-weight: 600;">Gemini</span>
                    </button>
                    <button class="ob-btn ob-provider-pill" id="pill-openrouter-ob" data-provider="openrouter"
                      style="flex: 1; min-width: 90px; flex-direction: column; align-items: center; gap: 4px; padding: 12px 4px;">
                      <span class="material-symbols-rounded" style="font-size: 20px;">public</span>
                      <span data-i18n="setup.prefs.openrouterLabel"
                        style="font-size: 0.82rem; font-weight: 600;">OpenRouter</span>
                    </button>
                  </div>
                  <p id="provider-hint-ob" data-i18n="setup.prefs.hintGroq"
                    style="font-size: 0.76rem; color: rgba(255,255,255,0.7); margin: 10px 0 0; text-align: center;">Você
                    pode mudar isso a qualquer momento nas configurações.</p>
                </div>

                <div class="ob-actions" style="margin-top: 4px;">
                  <button id="prev-prefs" class="ob-btn ob-btn-ghost">
                    <span class="material-symbols-rounded">arrow_back</span>
                  </button>
                  <button id="saveSetupBtn" class="ob-btn ob-btn-finish">
                    <span data-i18n="setup.finish">Concluir</span>
                    <span class="material-symbols-rounded">done_all</span>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div style="display:none;">
          <input id="provider-toggle" type="checkbox" />
          <span id="pill-groq"></span>
          <span id="pill-gemini"></span>
          <span id="pill-openrouter"></span>
          <div id="provider-hint"></div>
          <select id="select-groq-model"></select>
          <select id="select-gemini-model"></select>
          <select id="select-search-provider"></select>
          <a id="link-search-provider"></a>
          <div id="hint-groq"></div>
          <div id="hint-serper"></div>
          <div id="hint-gemini"></div>
        </div>
      </div>

    </div>
  </div>

  <!-- ===== TOAST CONTAINER ===== -->
  <div id="toast-container" class="toast-container" aria-live="polite"></div>

  <!-- ===== MAIN CONTAINER (Hidden during onboarding) ===== -->
  <div class="container" id="main-app-container">
    <header>
      <div class="header-top">
        <div class="header-brand">
          <span class="material-symbols-rounded header-logo">track_changes</span>
          <div>
            <h1 data-i18n="app.title">AnswerHunter</h1>
            <p class="subtitle" data-i18n="app.subtitle">Educational answer hunter</p>
          </div>
        </div>
        <div class="header-actions">
          <div class="lang-toggle" id="languageToggle">
            <button type="button" class="lang-btn active" data-lang="en">
              <svg viewBox="0 0 640 480" class="lang-flag">
                <path fill="#bd3d44"
                  d="M0 0h640v37h-640zm0 73.9h640v37h-640zm0 73.8h640v37h-640zm0 73.8h640v37h-640zm0 73.9h640v37h-640zm0 73.8h640v37h-640zm0 73.8h640v36.9h-640z" />
                <path fill="#fff"
                  d="M0 37h640v36.9h-640zm0 73.8h640v36.9h-640zm0 73.9h640v36.8h-640zm0 73.8h640v37h-640zm0 73.9h640v36.8h-640zm0 73.8h640v36.9h-640z" />
                <path fill="#192f5d" d="M0 0h256v258.5h-256z" />
                <g fill="#fff">
                  <g id="s18">
                    <g id="s9">
                      <g id="s5">
                        <g id="s4">
                          <path id="s"
                            d="M26.2 17l3.5 10.8h11.4l-9.2 6.7 3.5 10.8-9.2-6.7-9.2 6.7 3.5-10.8-9.2-6.7h11.4z" />
                          <use href="#s" x="52.4" />
                        </g>
                        <use href="#s4" x="104.8" />
                      </g>
                      <use href="#s4" x="157.2" />
                    </g>
                    <use href="#s5" y="39.4" />
                  </g>
                  <use href="#s9" y="78.8" />
                </g>
                <use href="#s18" x="26.2" y="19.7" />
              </svg>

            </button>
            <button type="button" class="lang-btn" data-lang="pt-BR">
              <svg viewBox="0 0 640 480" class="lang-flag">
                <path fill="#229e45" d="M0 0h640v480H0z" />
                <path fill="#f8e509" d="M321.4 36.2 609.7 240 321.4 443.8 33.1 240z" />
                <circle fill="#2b49a3" cx="321.4" cy="240" r="113.4" />
                <path fill="#fff" d="M195.8 231.5c37.6-58.1 109.8-82.2 169-59a116 116 0 0 0-169 59z" />
              </svg>

            </button>
          </div>
          <button id="settingsBtn" class="settings-btn" data-i18n-title="app.settings">
            <span class="material-symbols-rounded">settings</span>
          </button>
        </div>
      </div>
    </header>

    <!-- ===== TABS & CONTENT (hidden until setup done) ===== -->
    <div class="tabs">
      <button class="tab-btn active" data-tab="search">
        <span class="material-symbols-rounded">search</span>
        <span data-i18n="tab.search">Search</span>
      </button>
      <button class="tab-btn" data-tab="binder">
        <span class="material-symbols-rounded">folder</span>
        <span data-i18n="tab.binder">Binder</span>
      </button>
      <div class="tab-indicator" id="tab-indicator"></div>
    </div>

    <div id="view-search" class="view-section active">
      <div class="controls">
        <div class="btn-group">
          <button id="searchBtn" class="btn-search">
            <span class="material-symbols-rounded">travel_explore</span>
            <span data-i18n="action.search">Search</span>
          </button>
          <button id="extractBtn" class="btn-primary">
            <span class="material-symbols-rounded">description</span>
            <span data-i18n="action.extract">Extract</span>
          </button>
        </div>
        <button id="copyBtn" class="btn-secondary" disabled>
          <span class="material-symbols-rounded">content_copy</span>
          <span data-i18n="action.copyAll">Copy all</span>
        </button>
      </div>
      <div id="status" class="status"></div>
      <div id="results" class="results">
        <div class="placeholder" id="search-placeholder">
          <span class="material-symbols-rounded">library_books</span>
          <p data-i18n="placeholder.search">Find answers and save them to your binder.</p>
          <p class="placeholder-hint" data-i18n="placeholder.searchHint">Open a question in your browser and click
            "Search" or "Extract".</p>
        </div>
      </div>
    </div>

    <div id="view-binder" class="view-section">
      <div class="binder-header">
        <div class="binder-header-left">
          <span class="material-symbols-rounded binder-header-icon">menu_book</span>
          <div>
            <h2 data-i18n="binder.title">My Study</h2>
            <p class="binder-subtitle" data-i18n="binder.subtitle">Saved questions for review</p>
          </div>
        </div>
        <button id="clearBinderBtn" class="action-btn" data-i18n-title="binder.clearAll">
          <span class="material-symbols-rounded">delete_sweep</span>
        </button>
      </div>
      <div id="binder-list" class="results">
        <div class="placeholder" id="binder-placeholder">
          <span class="material-symbols-rounded">folder_open</span>
          <p data-i18n-html="binder.placeholderHtml">Your binder is empty.<br>Save questions to review later.</p>
          <button class="placeholder-cta" id="binderGoToSearch" type="button">
            <span class="material-symbols-rounded">search</span>
            <span data-i18n="binder.goToSearch">Go to Search</span>
          </button>
        </div>
      </div>
    </div>

    <footer>
      <p>
        <span class="material-symbols-rounded" style="font-size:16px;">smart_toy</span>
        <span data-i18n="footer.refined">AI-refined answers with source weighting</span>
      </p>
    </footer>
  </div>

  <script type="module" src="popup.js"></script>
</body>

</html>